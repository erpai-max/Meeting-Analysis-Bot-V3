<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Meeting Insights Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:#f6f7fb;}
    .wrap{max-width:1200px;margin:20px auto;padding:16px;}
    h1{margin:0 0 12px;}
    .card{background:#fff;border:1px solid #e5e7eb;border-radius:12px;padding:16px;}
    table{width:100%;border-collapse:collapse;font-size:13px;}
    th,td{padding:8px 10px;border-bottom:1px solid #eee;}
    th{position:sticky;top:0;background:#fafafa;}
    .controls{display:flex;gap:8px;margin-bottom:12px;flex-wrap:wrap}
    input,select{padding:8px;border:1px solid #d1d5db;border-radius:8px;}
    .pill{display:inline-block;padding:4px 8px;background:#eef2ff;border-radius:9999px;margin-right:6px;}
  </style>
</head>
<body>
<div class="wrap">
  <h1>Meeting Insights Dashboard</h1>
  <div class="card">
    <div class="controls">
      <input id="search" placeholder="Search (society, owner, manager, etc.)"/>
      <select id="sent">
        <option value="">Sentiment</option>
        <option>Positive</option>
        <option>Neutral</option>
        <option>Negative</option>
        <option>Mixed</option>
      </select>
    </div>
    <div id="counts"></div>
    <div style="overflow:auto; max-height:70vh;">
      <table id="tbl">
        <thead></thead>
        <tbody></tbody>
      </table>
    </div>
  </div>
</div>
<script>
  const HEADERS = [
    "Date","POC Name","Society Name","Visit Type","Meeting Type","Amount Value","Months","Deal Status","Vendor Leads","Society Leads",
    "Opening Pitch Score","Product Pitch Score","Cross-Sell / Opportunity Handling","Closing Effectiveness","Negotiation Strength","Rebuttal Handling",
    "Overall Sentiment","Total Score","% Score","Risks / Unresolved Issues","Improvements Needed","Owner (Who handled the meeting)","Email Id","Kibana ID",
    "Manager","Product Pitch","Team","Media Link","Doc Link","Suggestions & Missed Topics","Pre-meeting brief","Meeting duration (min)","Rapport Building",
    "Improvement Areas","Product Knowledge Displayed","Call Effectiveness and Control","Next Step Clarity and Commitment","Missed Opportunities",
    "Key Discussion Points","Key Questions","Competition Discussion","Action items","Positive Factors","Negative Factors","Customer Needs",
    "Overall Client Sentiment","Feature Checklist Coverage","Manager Email"
  ];

  const thead = document.querySelector("#tbl thead");
  const tbody = document.querySelector("#tbl tbody");
  thead.innerHTML = "<tr>" + HEADERS.map(h=>`<th>${h}</th>`).join("") + "</tr>";

  let data = [];
  fetch("dashboard_data.json")
    .then(r=>r.json())
    .then(rows => { data = rows; render(); });

  function render() {
    const q = (document.getElementById("search").value||"").toLowerCase();
    const s = document.getElementById("sent").value;

    let rows = data.filter(r=>{
      const joined = Object.values(r).join(" ").toLowerCase();
      const qok = !q || joined.includes(q);
      const sok = !s || r["Overall Sentiment"] === s || r["Overall Client Sentiment"] === s;
      return qok && sok;
    });

    document.getElementById("counts").innerHTML =
      `<span class="pill">Total: ${data.length}</span><span class="pill">Shown: ${rows.length}</span>`;

    tbody.innerHTML = rows.map(r=>{
      return "<tr>" + HEADERS.map(h=>`<td>${(r[h] ?? "")}</td>`).join("") + "</tr>";
    }).join("");
  }

  document.getElementById("search").addEventListener("input", render);
  document.getElementById("sent").addEventListener("change", render);
</script>
</body>
</html>
