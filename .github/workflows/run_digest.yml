name: Send Weekly Digest


on:
 workflow_dispatch: # Allows manual runs
 schedule:
   # Runs every Friday at 10:00 AM UTC (adjust as needed)
   - cron: '0 10 * * 5'


jobs:
 send-digest:
   runs-on: ubuntu-latest
   steps:
     - name: Checkout repository
       uses: actions/checkout@v4


     - name: Set up Python 3.10
       uses: actions/setup-python@v5
       with:
         python-version: '3.10'


     - name: Install dependencies
       run: |
         python -m pip install --upgrade pip
         pip install -r requirements.txt


     - name: Generate and Send Digest
       env:
         GCP_SA_KEY: ${{ secrets.GCP_SA_KEY }}
         SLACK_WEBHOOK_URL: ${{ secrets.SLACK_WEBHOOK_URL }} # For notifications
       run: python digest_generator.py



